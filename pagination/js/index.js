var Pagenation=function(e){this.conEl=null,this.controlEl=null,this.dataAry=[],this.pageAry=[],this.renderPageLen=4,this.className={actClassName:"active",prevClassName:"prev",nextClassName:"next"},this.size=10,this.arrowBtn=!0,this.numBtn=!0,this.pagelen=1,this.interfacePaging=!1,this.curIndex=0,this._analysisOptions(e),this._init()};Pagenation.prototype={constructor:Pagenation,_analysisOptions:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})},_getData:function(e){throw new Error("must set a _getData function")},_init:function(){var e=this;this._getData(function(t,n){e._dataInit(t,n)})},_dataInit:function(e,t){this._getLen(e.length,t),this._dataArySave(e),this._pageArySave(),this._create(),this._render(0)},_getLen:function(e,t){t&&(this.interfacePaging=!0),this.pageLen=t||Math.ceil(e/this.size)},_dataArySave:function(e){if(this.interfacePaging)this.dataAry[this.curIndex]=e;else for(var t=this.pageLen,n=this.size,a=0;t>a;a++)this.dataAry.push(e.slice(n*a,n*(a+1)))},_pageArySave:function(){for(var e,t=this,n=0,a=this.pageLen;a>n;n++)e=document.createElement("li"),e.innerHTML=t._formatPageControl(n),this.pageAry.push(e),function(n){e.addEventListener("click",function(){t._render(n)})}(n)},_create:function(){this.numBtn&&this._createPageControl(),this.arrowBtn&&(this._createPrev(),this._createNext())},_createPageControl:function(){var e=this.controlEl,t=document.createElement("ul");t.className=this.className.ulClassName,e.append(t)},_createPrev:function(){var e=this,t=this.controlEl,n=document.createElement("span");n.className=this.className.prevClassName,n.innerHTML="上一页",n.addEventListener("click",function(){e.curIndex=e.curIndex-- >0?e.curIndex:0,e._render(e.curIndex)}),t.append(n)},_createNext:function(){var e=this,t=this.controlEl,n=document.createElement("span"),a=this.pageLen-1;n.className=this.className.nextClassName,n.innerHTML="下一页",n.addEventListener("click",function(){e.curIndex=e.curIndex++>=a?a:e.curIndex,e._render(e.curIndex)}),t.append(n)},_render:function(e){var t=this;return this.curIndex=e,this.dataAry[e]?(this.numBtn&&this._renderPageControl(e),this._renderContent(e),void console.timeEnd("render")):void this._getData(function(n){t._dataArySave(n),t._render(e)})},_formatPageControl:function(e){return e+1},_renderPageControl:function(e){var t,n,a=this.className.actClassName,i=this.controlEl,r=i.find("ul"),s=document.createDocumentFragment(),c=this.renderPageLen,o=Math.ceil(this.renderPageLen/2),l=this.pageAry.length,h=0;for(c>=l?(n=0,c=l):o-1>=e?(t=e,n=0):e>=l-o?(console.log(e),t=(e+1)%c+o-1,n=l-c):(n=e-o+1,t=o-1);c>h;h++)s.appendChild(this.pageAry[n+h]);r.html(s),r.find("li").eq(t).addClass(a).siblings().removeClass(a)},_formatContent:function(e){var t="";for(var n in e)t+=e[n]+"<br/>";return t},_renderContent:function(e){var t=this,n=this.conEl,a=this.dataAry[e],i="";a.forEach(function(e){i+=t._formatContent(e)}),n.html(i)}},new Pagenation({conEl:$(".page-content"),controlEl:$(".control-wrapper"),className:{actClassName:"active",nextClassName:"next",prevClassName:"prev",ulClassName:"page-list"},size:1,interfacePaging:!1,_getData:function(e){$.ajax({type:"GET",url:"./data/data"+(this.curIndex+1)+".json",success:function(t){console.time("render"),e&&e(t.list)},error:function(e,t,n){console.log(e,t,n)}})}});