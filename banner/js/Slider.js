var noop=function(){},Slider=function(t){$.extend(this,{element:null,prefix:"",arrow:!0,button:!0,interval:5e3,auto:!0,current:0,events:{onBeforeMove:noop,onAfterMove:noop}},t||{}),this.view=null,this.sport=null,this.items=[],this.length=0,this.distance=0,this.tID=-2,this.create()};Slider.prototype={create:function(){var t=this.element,e=this.view=t.children(":first"),n=this.sport=e.children(":first"),i=this.items=n.children();this.distance=i.outerWidth(!0),this.length=i.length,n.append(i.clone()),n.width(2*this.length*this.distance),this.createArrow(),this.createButton(),this.autoSlider()},createArrow:function(){if(this.arrow){var t=this;this.element.append(['<div class="'+this.getClassName("arrow")+'">','\t<span class="'+this.getClassName("prev")+'"></span>','\t<span class="'+this.getClassName("next")+'"></span>',"</div>"].join("")).on("click",this.getClassName("prev",!0),function(){t.prev()}).on("click",this.getClassName("next",!0),function(){t.next()})}},createButton:function(){if(this.button){var t,e,n,i=this,s=this.element,o=this.length,r=this.events,a="";for(a+='<div class="'+this.getClassName("button")+'">',t=0;t<o;t++)a+="<span",this.current===t&&(a+=' class="cur"'),a+="></span>";a+="</div>",e=$(a),n=e.find("span"),s.append(e).on("click",this.getClassName("button span",!0),function(){i.move($(this).index())});var h=r.onBeforeMove;r.onBeforeMove=function(t){return n.removeClass("cur").eq(t).addClass("cur"),h.apply(this,arguments)}}},autoSlider:function(){if(this.auto){var t=this,e=this.element,n=function(){i(),t.tID=setInterval(function(){t.next()},t.interval)},i=function(){-1!==t.tID&&(clearInterval(t.tID),t.tID=-1)};n(),e.on("mouseenter",function(){i()}).on("mouseleave",function(){n()})}},move:function(t){var e=this,n=this.sport,i=this.length,s=this.distance,o=this.events;n.is(":animated")||t===this.current||(t<0&&(n.css("left",-i*s),t=i-1),"function"==typeof o.onBeforeMove&&o.onBeforeMove.call(this,t>=i?0:t),this.lazy(this.items.eq(t)),n.animate({left:-t*s},function(){t>=i&&(n.css("left",0),t=0),e.current=t,"function"==typeof o.onAfterMove&&o.onAfterMove.call(this,t)}))},prev:function(){this.move(this.current-1)},next:function(){this.move(this.current+1)},getClassName:function(t,e){return(e?".":"")+this.prefix+"_"+t},lazy:function(t){t.find("img[data-src]").each(function(){var t=this.getAttribute("data-src");t&&(this.setAttribute("src",t),this.removeAttribute("data-src"))})}},module.exports=function(t){return new Slider(t)};