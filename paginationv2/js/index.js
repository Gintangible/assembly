var Pagenation=function(t){this.conBox=null,this.pageBox=null,this.dataAry=[],this.pageAry=[],this.showPN=!0,this.ulCls="page-btn",this.activeCls="active",this.showArrow=!0,this.prevCls="prev",this.nextCls="next",this.prevContent="<",this.nextContent=">",this.jump=!0,this.jumpCls="jump",this.jumpBtnContent="Go",this.showDataCount=10,this.pageCount=10,this.showPageCount=4,this.curIndex=0,this.mode="default",this["interface"]=!1,this._init(t)};Pagenation.prototype={constructor:Pagenation,_analysisOptions:function(t){var e=this;Object.keys(t).forEach(function(n){e[n]=t[n]})},_getData:function(t){throw new Error("must set a _getData function")},_init:function(t){var e=this;this._analysisOptions(t),this._getData(function(t,n){e._dataInit(t,n)})},_dataInit:function(t,e){this._getLen(t.length,e),this._dataArySave(t),this._createElement(),this._render(0),this._bindEvent()},_getLen:function(t,e){e&&(this["interface"]=!0),this.pageCount=e||Math.ceil(t/this.showDataCount)},_dataArySave:function(t){if(this["interface"])this.dataAry[this.curIndex]=t;else for(var e=this.pageCount,n=this.showDataCount,a=0;e>a;a++)this.dataAry.push(t.slice(n*a,n*(a+1)))},_createElement:function(){this.showPN&&this._createPageControl(),this.showArrow&&(this._createPrev(),this._createNext()),this.jump&&this._createJump()},_createPageControl:function(){var t=this.pageBox,e=document.createElement("ul");e.className=this.ulCls,t.append(e),this._pageInit()},_createPrev:function(){var t=this,e=this.pageBox,n=document.createElement("a");n.className=this.prevCls,n.innerHTML=this.prevContent,n.addEventListener("click",function(){t.curIndex=t.curIndex-- >0?t.curIndex:0,t._render(t.curIndex)}),e.append(n)},_createNext:function(){var t=this,e=this.pageBox,n=document.createElement("a"),a=this.pageCount-1;n.className=this.nextCls,n.innerHTML=this.nextContent,n.addEventListener("click",function(){t.curIndex=t.curIndex++>=a?a:t.curIndex,t._render(t.curIndex)}),e.append(n)},_createJump:function(){var t=this,e=this.pageBox,n=document.createElement("div"),a=document.createElement("input"),i=document.createElement("a");n.className=this.jumpCls,i.innerHTML=this.jumpBtnContent,a.addEventListener("input",function(e){var n=this.value,a=/[^\d]/g;a.test(n)&&(this.value=n.replace(a,"")),n>t.pageCount&&(this.value=t.pageCount),0===parseInt(n)&&(this.value=1)}),i.addEventListener("click",function(){var e=a.value;e&&t._render(e-1)}),document.addEventListener("keydown",function(e){if(13==e.keyCode){var n=a.value;if(!n)return;t._render(n-1)}}),e.append(n),n.append(a),n.append(i)},_render:function(t){var e=this;return this.curIndex=t,this.dataAry[t]?(this.showPN&&this._renderPageControl(t),void this._renderContent(t)):void this._getData(function(n){e._dataArySave(n),e._render(t)})},_formatPageControl:function(t){return"<a>"+(t+1)+"</a>"},_pageInit:function(){var t=this.pageBox,e=t.find("ul"),n=this.pageCount,a="";if(console.log(this.mode),"default"===this.mode){console.log("default"===this.mode);for(var i=0;n>i;i++)console.log(i),a+="<li>"+this._formatPageControl(i)+"</li>"}e.html(a)},_renderPageControl:function(t){var e=this.pageBox,n=e.find("ul"),a=this.pageCount;switch(this.mode){case"fixed":var i=this.showPageCount,s=Math.ceil(i/2),o=0,r="";for(i>=a?i=a:t>=a-s-1?(t=i-(a-t),o=a-len):(o=t-s+1,t=s-1);i>o;o++)r+="<li>"+this._formatPageControl(o)+"</li>";n.html(r);break;case"unfixed":break;case"personDesign":this._personDesign(this.pageCount)}this._btnStatus(t)},_btnStatus:function(t){for(var e=this.activeCls,n=this.pageBox,a=n.find("ul a"),i=0,s=a.length;s>i;i++)a.eq(i).removeClass(e).removeAttr("disabled");a.eq(t).addClass(e).attr("disabled",!0)},_bindEvent:function(){var t=this,e=(this.activeCls,this.pageBox),n=e.find("ul a");n.on("click",function(){t._render(t.curIndex+this.index)})},_formatContent:function(t){var e="";for(var n in t)e+=t[n]+"<br/>";return e},_renderContent:function(t){var e=this,n=this.conBox,a=this.dataAry[t],i="";a.forEach(function(t){i+=e._formatContent(t)}),n.html(i)}},new Pagenation({conBox:$(".page-content"),pageBox:$(".control-wrapper"),ulCls:"page-list",showDataCount:1,_getData:function(t){$.ajax({type:"GET",url:"./data/data"+(this.curIndex+1)+".json",success:function(e){t&&t(e.list,e.total_page)},error:function(t,e,n){console.log(t,e,n)}})}});