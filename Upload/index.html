<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/ruzhu.css">
    <title>Document</title>
</head>

<body>
    <div class="info-wrap">

        <div class="input-box2">

            <ul class="updata-wrap">
                <li class="item">
                    <div class="item-yingye">
                        <input type="file" name="photo1" id="photo1">
                    </div>
                    <p class="item-intro">
                        营业执照
                    </p>
                </li>
                <li class="item">
                    <div class="item-user">
                        <input type="file" name="photo2" id="photo2" accept="image/gif,image/jpeg,image/jpg,image/png">
                    </div>
                    <p class="item-intro">
                        法人身份证（正面）
                    </p>
                </li>
                <li class="item">
                    <div class="item-place">
                        <input type="file" name="photo3" id="photo3" accept="image/gif,image/jpeg,image/jpg,image/png">
                    </div>
                    <p class="item-intro">
                        法人身份证（反面）
                    </p>
                </li>
            </ul>
        </div>
    </div>
    <script>
        updataImgFn = function () {
            var showImg = function (wrap, src) {
                var img = $(wrap).find('img').get(0);
                if (!img) {
                    img = document.createElement('img');
                    $(wrap).append(img);
                }
                img.src = src;
            };


            function uploadFile(el, options) {


                if (!/image\/\w+/.test(file[i].type)) {
                    alert("请选择图片文件");
                    return false;
                }
                if (file[i].size > 2048 * 1024) {
                    alert("图片不能大于2MB");
                    continue;
                }

                

            }

            Upload.prototype = {
                constructor: Upload,

                _init: function(){
                    
                },
                _bind: function(){

                },
                _preview: function () {
                    var reader = new FileReader();
                    reader.onloadstart = function (e) {
                        console.log("开始读取....");
                    }
                    reader.onprogress = function (e) {
                        console.log("正在读取中....");
                    }
                    reader.onabort = function (e) {
                        console.log("中断读取....");
                    }
                    reader.onerror = function (e) {
                        console.log("读取异常....");
                    }
                    reader.onload = function (e) {
                        console.log("成功读取....");
                        _this._callback(this.result);
                    }
                    reader.readAsDataURL(file[i]);
                }
            }

            window.onload = function () {
                var files = document.querySelectorAll('input[type="file"');
                files.forEach(function (item) {
                    var file = item.files[0],
                        parent = item.parentNode;
                    if (file) {
                        var reader = new FileReader();
                        reader.onload = function () {
                            showImg(parent, this.result);
                        }
                        reader.readAsDataURL(file);
                    }
                })
            }

            $('input[type="file"').change(function () {
                var file = this.files[0];
                var parent = $(this).parent();
                if (file) {
                    var reader = new FileReader();
                    reader.onload = function () {
                        showImg(parent, this.result);
                    }
                    reader.readAsDataURL(file);
                }
            });
        }()
    </script>
</body>

</html>